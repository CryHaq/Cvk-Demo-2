import{j as l,w as p,q as m,x as _}from"./index-DIeESg7c.js";const f=_("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function v({className:t,variant:s,asChild:r=!1,...e}){const a=r?p:"span";return l.jsx(a,{"code-path":"src/components/ui/badge.tsx:38:5","data-slot":"badge",className:m(f({variant:s}),t),...e})}const h=()=>{const t="CVK",s=new Date().toISOString().slice(0,10).replace(/-/g,""),r=Math.random().toString(36).substring(2,8).toUpperCase();return`${t}-${s}-${r}`},n=()=>{const t=localStorage.getItem("cvk_mock_orders");return t?JSON.parse(t):[]},c=t=>{localStorage.setItem("cvk_mock_orders",JSON.stringify(t))},d=()=>JSON.parse(localStorage.getItem("user")||"{}").id||1,S={createOrder:async t=>new Promise(s=>{setTimeout(()=>{const r=n(),e={id:Date.now(),order_number:h(),user_id:d(),subtotal:t.subtotal,vat_amount:t.vat_amount,discount_amount:0,shipping_cost:0,total_amount:t.total_amount,currency:"EUR",status:"pending",payment_status:"pending",shipping_address:t.shipping_address,billing_address:t.billing_address,items:t.items.map((a,i)=>({id:Date.now()+i,...a,has_zip:a.has_zip||!1,has_valve:a.has_valve||!1})),status_history:[{id:Date.now(),new_status:"pending",changed_by:d(),changed_by_type:"system",note:"Sipariş oluşturuldu",created_at:new Date().toISOString()}],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r.push(e),c(r),s({success:!0,data:e})},800)}),getMyOrders:async()=>new Promise(t=>{setTimeout(()=>{const r=n().filter(e=>e.user_id===d());t({success:!0,data:r})},500)}),getOrderDetails:async t=>new Promise(s=>{setTimeout(()=>{const e=n().find(a=>a.id===t);if(!e){s({success:!1,message:"Sipariş bulunamadı"});return}if(e.user_id!==d()&&JSON.parse(localStorage.getItem("user")||"{}").role!=="admin"){s({success:!1,message:"Yetkisiz erişim"});return}s({success:!0,data:e})},500)}),updateOrderStatus:async(t,s,r)=>new Promise(e=>{setTimeout(()=>{const a=n(),i=a.findIndex(g=>g.id===t);if(i===-1){e({success:!1,message:"Sipariş bulunamadı"});return}const o=a[i],u=o.status;o.status=s,o.updated_at=new Date().toISOString(),o.status_history.push({id:Date.now(),old_status:u,new_status:s,changed_by:d(),changed_by_type:"admin",note:r||`Durum ${u} -> ${s} olarak değiştirildi`,created_at:new Date().toISOString()}),s==="shipped"&&(o.shipping_company="Yurtiçi Kargo",o.tracking_number=`1${Math.floor(Math.random()*1e10)}`),c(a),e({success:!0,message:"Sipariş durumu güncellendi"})},600)}),processPayment:async t=>new Promise(s=>{setTimeout(()=>{const r=n(),e=r.find(i=>i.id===t);if(!e){s({success:!1,message:"Sipariş bulunamadı"});return}Math.random()>.1?(e.payment_status="paid",e.status="confirmed",e.payment_method="iyzico",e.updated_at=new Date().toISOString(),e.status_history.push({id:Date.now(),old_status:"pending",new_status:"confirmed",changed_by:0,changed_by_type:"system",note:"Ödeme başarılı - iyzico",created_at:new Date().toISOString()}),c(r),y.sendOrderConfirmation(e),s({success:!0,message:"Ödeme başarılı",data:{payment_id:`PAY-${Date.now()}`}})):(e.payment_status="failed",e.updated_at=new Date().toISOString(),c(r),s({success:!1,message:"Kartınızda yetersiz bakiye veya banka reddetti"}))},1500)}),getAllOrders:async t=>new Promise(s=>{setTimeout(()=>{const r=n();r.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime()),s({success:!0,data:{orders:r,pagination:{total:r.length,page:1,limit:r.length,total_pages:1}}})},500)}),getOrderStats:async()=>new Promise(t=>{setTimeout(()=>{const s=n(),r={total_orders:s.length,pending:s.filter(e=>e.status==="pending").length,confirmed:s.filter(e=>e.status==="confirmed").length,processing:s.filter(e=>e.status==="processing").length,shipped:s.filter(e=>e.status==="shipped").length,delivered:s.filter(e=>e.status==="delivered").length,total_revenue:s.filter(e=>e.payment_status==="paid").reduce((e,a)=>e+a.total_amount,0)};t({success:!0,data:r})},400)})},y={sendOrderConfirmation:t=>{console.log(`[EMAIL] Order confirmation sent to ${t.shipping_address.email}`)},sendPaymentReceived:t=>{console.log(`[EMAIL] Payment received notification sent to ${t.shipping_address.email}`)},sendOrderShipped:t=>{console.log(`[EMAIL] Order shipped notification sent to ${t.shipping_address.email}`)}};export{v as B,S as o};
